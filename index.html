<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="css/materialize.css" media="screen,projection" />
    <link type="text/css" rel="stylesheet" href="css/style.css" media="screen,projection" />

    <!--Import jQuery before materialize.js-->
    <script type="text/javascript" src="js/jquery-2.1.1.js"></script>
    <script type="text/javascript" src="js/materialize.js"></script>
    <script type="text/javascript" src="js/angular.js"></script>
    <script type="text/javascript" src="js/scripts.js"></script>

</head>

<body>
    <!--  Spinner-->
    <div class="progress" style="display:none;">
        <div class="indeterminate"></div>
    </div>

     <!-- Modal Structure No Record found-->
    <div id="modal" class="modal">
        <h4>No record found</h4>
        <i class="mdi-alert-error large" style="color:#283593"></i>
        <div class="action-bar">
          <a href="#" class="waves-effect waves-purple btn-flat modal-action modal-close">Close</a>
        </div>
    </div>

    <nav>
        <div class="nav-wrapper indigo darken-1">
            <div class="container">
                <div class="input-field col s11" style="margin-top: 0rem;">
                    <a href="#" data-activates="slide-out" class="button-collapse">
                        <i class="mdi-navigation-menu" style="font-size: 2rem;"></i>
                    </a>
                    <input id="search" class="right-align" style="padding-right: 2rem;" type="text" required maxlength="50">
                    <label for="search" class="right-align" style="right: 0;"><i class="mdi-action-search"  onclick="search();"></i>
                    </label>
                </div>
            </div>
        </div>
    </nav>

    <div id="body" class="container" data-ng-app="" data-ng-controller="testController">

        <!--navigation-->
        <ul id="slide-out" class="side-nav full">
            <li><a href="#">Navbar Link</a>
            </li>
        </ul>

         <!-- Modal Structure -->
        <div id="modal1" class="modal">
            <h4>{{product.brand + " " +product.model}}</h4>
            <p>Details about the product will come here
            <input type="text" ng-model="product.model"><br>
            </p>
            <div class="action-bar">
              <a href="#" class="waves-effect waves-purple btn-flat modal-action modal-close" ng-click="openWindow(store.url);">Go</a>
              <a href="#" class="waves-effect waves-purple btn-flat modal-action modal-close">Close</a>
            </div>
        </div>


        <!--cards-->
        <div class="card-panel white" data-ng-repeat="product in jsonData">
            <div ng-if="product.stores.length > 0">
                <div class="card-head indigo white-text"><!--Model -->
                    <h5>{{product.model}} </h5>
                </div>
                <div class="row valign-wrapper card-body">
                    <div style="padding-left:1rem;width:50%;text-align: center;" >
                        <!--ng-switch="(product.stores | filter: goodStoreFilter | limitTo:1).length"-->
                        <!--show icon from flipkart or amazon - ebay has crappy icons-->
                        <!--<img ng-repeat="store in (product.stores | filter: goodStoreFilter(product) | limitTo:1)" src="{{store.image}}" alt="" class="responsive-img">-->
                        <img src="{{product.stores[0].image}}" alt="" class="responsive-img">
                    </div>
                    <div class="col s12" style="text-align: center;">
                        <div class="row"><!--Brand -->
                            <h5>{{product.brand}}</h5>
                            <div class="row valign-wrapper" ng-click="openModelWithData(product,product.stores[0])">
                              <i class="{{product.stores[0].website}}"  style="transform: translateY(0%);">
                              </i>
                            </div>
                            <div class="row">
                              <h6>
                               from &#8377; {{product.stores[0].price}}
                              </h6>
                            </div>
                            <div class="row waves-effect">
                                <i class="mdi-action-exit-to-app Small" ng-click="openModelWithData(product,product.stores[0]);">
                                </i>
                            </div>
                        </div>
                    </div>

                </div>
                <div>
                <ul class="collapsible" data-collapsible="accordion">
                  <li>
                    <div class="collapsible-header"><i class="mdi-navigation-expand-more Large"></i>More Stores</div>
                    <div class="collapsible-body">
                      <div>
                          <table>
                              <thead>
                                  <tr>
                                      <th data-field="id">Store</th>
                                      <th data-field="name">Price</th>
                                      <th data-field="price">Go</th>
                                  </tr>
                              </thead>
                              <tbody>
                                <tr ng-repeat="store in product.stores">
                                    <td>
                                         <i class="{{store.website}}"  style="transform: translateY(0%);">
                                         </i>
                                    </td>
                                    <td>
                                         &#8377; {{store.price}}
                                    </td>
                                    <td class="waves-effect modal-trigger" ng-click="openModelWithData(product,store);">
                                         <i class="mdi-action-exit-to-app Small"></i>
                                    </td>
                                </tr>
                              </tbody>
                          </table>
                      </div>
                    </div>
                  </li>
                </ul>
                </div>
            </div>
        </div>
    </div>
    </body>

</html>
