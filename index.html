<html  ng-app="ui.bootstrap.vish">

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="css/materialize.css" media="screen,projection" />
    <link type="text/css" rel="stylesheet" href="css/style.css" media="screen,projection" />

    <!--Import jQuery before materialize.js-->
    <script type="text/javascript" src="js/jquery-2.1.1.js"></script>
    <script type="text/javascript" src="js/materialize.js"></script>
    <script type="text/javascript" src="js/angular.js"></script>
    <script type="text/javascript" src="js/scripts.js"></script>
    <script type="text/javascript" src="js/controller.js"></script>
    <script type="text/javascript" src="js/categories.js"></script>
    <script type="text/javascript" src="js/ui-bootstrap-tpls-0.12.0.js"></script>


  </head>

  <body>
    <!--  Spinner to show the page is processing-->
    <div class="progress" style="display:none;">
        <div class="indeterminate"></div>
    </div>

     <!-- Modal Structure No Record found-->
    <div id="modal" class="compactModal">
        <h4>No record found</h4>
        <i class="mdi-alert-error large" style="color:#283593"></i>
        <div class="action-bar">
          <a href="#" class="waves-effect waves-purple btn-flat modal-action modal-close">Close</a>
        </div>
    </div>

    <!--Navigation at the top -->
    <nav id="header-wrap">
        <div class="nav-wrapper indigo darken-1">
            <div class="container">
                <div class="col s3" style="float:left;position:absolute;">
                  <ul>
                    <li><a href="#" data-activates="slide-out" class="button-collapse waves-effect waves-light">
                          <i class="mdi-navigation-menu" style="font-size: 2rem;"></i>
                        </a>
                    </li>
                    <li><a href="#" class="waves-effect waves-light tooltipped" data-position="right" data-delay="50" data-tooltip="Advanced search" onclick="$('#advanceSearchModel').openModal();">
                        <i class="mdi-action-receipt" style="font-size: 2rem;"></i>
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="input-field col s9" style="margin-top: 0rem;width: 70%;float: right;">
                    <input id="search" class="right-align" style="padding-right: 2rem;" type="text" required maxlength="50">
                    <label for="search" class="right-align" style="right: 0;"><i class="mdi-action-search"  onclick="search();"></i>
                    </label>
                </div>
            </div>
        </div>
    </nav>

    <div id="body" class="container" data-ng-controller="mainController">

         <!-- Modal for filter and advanced search-->
          <div id="advanceSearchModel" class="modal">
            <h5>Advanced Search</h5>
            <p>A bunch of text</p>
            <div class="action-bar">
              <a href="#" class="waves-effect waves-purple btn-flat modal-action modal-close">Cancel</a>
              <a href="#" class="waves-effect waves-purple btn-flat modal-action modal-close">Reset</a>
              <a href="#" class="waves-effect waves-purple btn-flat modal-action modal-close">Search</a>
            </div>
          </div>

        <!--side navigation - list of categories available-->
        <ul id="slide-out" class="side-nav full" style="overflow-y:scroll">
             <ul class="collection">
              <li class="collection-item"><h5>Categories</h5></li>
              <li id="1" class="left-nav-item collection-item waves-effect waves-purple selected"><div>Mobile Phones<a href="#!" class="secondary-content" style="float:left"><i class="mdi-hardware-phone-android small" style="color:#c2185b"></i></a></div></li>
              <li id="2" class="left-nav-item collection-item waves-effect waves-purple"><div>Tablets<a href="#!" class="secondary-content" style="float:left"><i class="mdi-hardware-tablet-mac small" style="color:#c2185b"></i></a></div></li>
              <li id="3" class="left-nav-item collection-item waves-effect waves-purple"><div>Head phones<a href="#!" class="secondary-content" style="float:left"><i class="mdi-hardware-headset small" style="color:#c2185b"></i></a></div></li>
              <li id="4" class="left-nav-item collection-item waves-effect waves-purple"><div>Cameras & DSLRs<a href="#!" class="secondary-content" style="float:left"><i class="mdi-image-camera-alt small" style="color:#c2185b"></i></a></div></li>
              <li id="5" class="left-nav-item collection-item waves-effect waves-purple"><div>Laptops<a href="#!" class="secondary-content" style="float:left"><i class="mdi-hardware-laptop-mac small" style="color:#c2185b"></i></a></div></li>
              <li id="6" class="left-nav-item collection-item waves-effect waves-purple"><div>Desktops<a href="#!" class="secondary-content" style="float:left"><i class="mdi-hardware-desktop-mac small" style="color:#c2185b"></i></a></div></li>
              <li id="7" class="left-nav-item collection-item waves-effect waves-purple"><div>Monitors<a href="#!" class="secondary-content" style="float:left"><i class="mdi-hardware-desktop-windows small" style="color:#c2185b"></i></a></div></li>
              <li id="8" class="left-nav-item collection-item waves-effect waves-purple"><div>TVs<a href="#!" class="secondary-content" style="float:left"><i class="mdi-hardware-tv small" style="color:#c2185b"></i></a></div></li>
              <li id="9" class="left-nav-item collection-item waves-effect waves-purple"><div>Printers<a href="#!" class="secondary-content" style="float:left"><i class="mdi-action-print small" style="color:#c2185b"></i></a></div></li>
              <li id="10" class="left-nav-item collection-item waves-effect waves-purple"><div>Speakers<a href="#!" class="secondary-content" style="float:left"><i class="mdi-hardware-speaker small" style="color:#c2185b"></i></a></div></li>
              <li id="11" class="left-nav-item collection-item waves-effect waves-purple"><div>Mp3 Players<a href="#!" class="secondary-content" style="float:left"><i class="mdi-image-audiotrack small" style="color:#c2185b"></i></a></div></li>
              <li id="12" class="left-nav-item collection-item waves-effect waves-purple"><div>Memory Cards<a href="#!" class="secondary-content" style="float:left"><i class="mdi-action-dns small" style="color:#c2185b"></i></a></div></li>
              <li id="13" class="left-nav-item collection-item waves-effect waves-purple"><div>Gaming<a href="#!" class="secondary-content" style="float:left"><i class="mdi-hardware-gamepad small" style="color:#c2185b"></i></a></div></li>
              <li id="14" class="left-nav-item collection-item waves-effect waves-purple"><div>Mobile Accessories<a href="#!" class="secondary-content" style="float:left"><i class="mdi-action-settings-input-hdmi small" style="color:#c2185b"></i></a></div></li>
              <li id="15" class="left-nav-item collection-item waves-effect waves-purple"><div>Laptop Accessories<a href="#!" class="secondary-content" style="float:left"><i class="mdi-hardware-memory small" style="color:#c2185b"></i></a></div></li>
            </ul>
        </ul>

         <!-- Modal Structure to show opening the e-comm. site -->
        <div id="modal1" class="compactModal" style="background-color: #fff;">
            <h4>{{product.model}}</h4>
            <p>Opening
              <i class="{{store.website}}"  style="transform: translateX(60%);">
              </i>
            </p>
            <div class="action-bar">
              <a href="#" class="waves-effect waves-purple btn-flat modal-action modal-close">Close</a>
            </div>
        </div>


        <!--cards - list of products-->
        <div style="padding-top: 60px;">
          <div class="card-panel white" data-ng-repeat="product in jsonData">
            <div ng-if="product.stores.length > 0">
                <div class="card-head indigo white-text"><!--Model -->
                    <h5>{{product.model}} </h5>
                </div>
                <div class="row valign-wrapper card-body">
                    <div style="padding-left:1rem;width:50%;text-align: center;" >
                        <!--ng-switch="(product.stores | filter: goodStoreFilter | limitTo:1).length"-->
                        <!--show icon from flipkart or amazon - ebay has crappy icons-->
                        <!--<img ng-repeat="store in (product.stores | filter: goodStoreFilter(product) | limitTo:1)" src="{{store.image}}" alt="" class="responsive-img">-->
                        <img ng-src="{{product.stores[0].image}}" alt="" class="responsive-img">
                    </div>
                    <div class="col s12" style="text-align: center;">
                        <div class="row"><!--Brand -->
                            <h5>{{product.brand}}</h5>
                            <div class="row valign-wrapper" ng-click="openModelWithData(product,product.stores[0])">
                              <i class="{{product.stores[0].website}}"  style="transform: translateY(0%);">
                              </i>
                            </div>
                            <div class="row">
                              <h6>
                               from &#8377; {{product.stores[0].price}}
                              </h6>
                            </div>
                            <div class="row waves-effect">
                                <i class="mdi-action-exit-to-app Small" ng-click="openModelWithData(product,product.stores[0]);">
                                </i>
                            </div>
                        </div>
                    </div>

                </div>
                <div>
                <ul class="collapsible" data-collapsible="accordion">
                  <li>
                    <div class="collapsible-header"><i class="mdi-navigation-expand-more Large"></i>More Stores</div>
                    <div class="collapsible-body">
                      <div>
                          <table>
                              <thead>
                                  <tr>
                                      <th data-field="id">Store</th>
                                      <th data-field="name">Price</th>
                                      <th data-field="price">Go</th>
                                  </tr>
                              </thead>
                              <tbody>
                                <tr ng-repeat="store in product.stores">
                                    <td>
                                         <i class="{{store.website}}"  style="transform: translateY(0%);">
                                         </i>
                                    </td>
                                    <td>
                                         &#8377; {{store.price}}
                                    </td>
                                    <td class="waves-effect modal-trigger" ng-click="openModelWithData(product,store);">
                                         <i class="mdi-action-exit-to-app Small"></i>
                                    </td>
                                </tr>
                              </tbody>
                          </table>
                      </div>
                    </div>
                  </li>
                </ul>
                </div>
            </div>
          </div>
          <pagination total-items="totalItems" ng-model="currentPage" ng-change="pageChanged()" ng-hide="jsonData.length==null || jsonData.length <=10" ></pagination>
        </div>
    </div>
  </body>

</html>
